# Инструкция по настройке SMTP для отправки email

## Для Яндекс почты

### 1. Создайте пароль приложения

1. Зайдите на https://passport.yandex.ru/profile
2. Перейдите в раздел "Безопасность"
3. Включите "Двухфакторную аутентификацию" (если еще не включена)
4. Нажмите "Пароли приложений"
5. Создайте новый пароль приложения для "Почта"
6. Скопируйте сгенерированный пароль (он будет длинным, например: `nqtkkgnenrgrehxf`)

### 2. Настройте .env файл

Добавьте или обновите следующие переменные в `.env`:

```env
# SMTP настройки для Яндекс
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=587
SMTP_USERNAME=tropanartov@yandex.ru
SMTP_PASSWORD=ваш_пароль_приложения_из_шага_1
SMTP_FROM=tropanartov@yandex.ru
SMTP_USE_TLS=true
```

**Важно:**
- Используйте **пароль приложения**, а не обычный пароль от почты
- Попробуйте сначала порт **587** (STARTTLS), если не работает - используйте **465** (SSL)
- `SMTP_USERNAME` и `SMTP_FROM` должны совпадать с вашим email в Яндекс

### 3. Проверка подключения

После настройки перезапустите сервер и попробуйте запросить сброс пароля. В логах сервера вы увидите:
- ✅ Успешная отправка
- ❌ Ошибки с подробным описанием

### Альтернативные порты

Если порт 587 не работает, попробуйте:
- `SMTP_PORT=465` (SSL)
- `SMTP_PORT=25` (обычно заблокирован провайдерами)

### Решение проблем

**Ошибка "connection refused":**
- Проверьте интернет-соединение
- Убедитесь, что порт не заблокирован firewall
- Попробуйте другой порт (587 вместо 465)

**Ошибка "authentication failed":**
- Убедитесь, что используете пароль приложения, а не обычный пароль
- Проверьте правильность `SMTP_USERNAME`

**Ошибка "certificate":**
- Попробуйте порт 587 вместо 465

