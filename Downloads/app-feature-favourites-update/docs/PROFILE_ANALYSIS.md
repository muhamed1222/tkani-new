# –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞ (Profile Page)

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–§–∞–π–ª:** `lib/features/profile/presentation/pages/profile_page.dart`  
**–†–∞–∑–º–µ—Ä:** ~1458 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞  
**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** Feature-based —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ domain –∏ presentation —Å–ª–æ–∏

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
lib/features/profile/
‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îî‚îÄ‚îÄ profile_state_manager.dart      # –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ)
‚îú‚îÄ‚îÄ presentation/
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ profile_page.dart           # –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ   ‚îî‚îÄ‚îÄ widgets/
‚îÇ       ‚îú‚îÄ‚îÄ edit_profile_page.dart      # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
‚îÇ       ‚îú‚îÄ‚îÄ change_password_dialog.dart # –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
‚îÇ       ‚îî‚îÄ‚îÄ password_input_field.dart    # –ü–æ–ª–µ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è
```

### –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```dart
// –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
User? _user;
bool _isLoading = true;
String _error = '';

// –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
List<Place> _favoritePlaces = [];
bool _isLoadingFavorites = false;
bool _isRemovingFavorite = false;

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
int _visitedPlaces = 0;
int _completedRoutes = 0;
int _totalPlaces = 0;
int _totalRoutes = 0;
bool _isLoadingStatistics = false;

// –ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
List<_ActivityItem>? _sortedActivities;
bool _isLoadingHistory = false;

// –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
DateTime? _lastProfileLoad;
DateTime? _lastStatisticsLoad;
```

---

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞ (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
- ‚úÖ –ò–º—è –∏ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ö–Ω–æ–ø–∫–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

### 2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**
- ‚úÖ –ü–æ—Å–µ—â–µ–Ω–Ω—ã–µ –º–µ—Å—Ç–∞ (—Ç–µ–∫—É—â–µ–µ/–æ–±—â–µ–µ)
- ‚úÖ –ü—Ä–æ–π–¥–µ–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç–µ–∫—É—â–µ–µ/–æ–±—â–µ–µ)
- ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä—ã —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Ä–µ—Å–ø—É–±–ª–∏–∫–∏
- ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

### 3. **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ**
- ‚úÖ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (maxFavoriteItems)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º –º–µ—Å—Ç–∞
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫

### 4. **–ò—Å—Ç–æ—Ä–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**
- ‚úÖ –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ—Å—Ç –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ (maxHistoryItems)
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—è–º
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è

### 5. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏, —Ñ–∞–º–∏–ª–∏–∏, email
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–∞
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞

### 6. **–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è**
- ‚úÖ –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (—Å—Ç–∞—Ä—ã–π ‚Üí –Ω–æ–≤—ã–π)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ Debounce –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–Ω–∏–º–∞—Ü–∏–∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üé® UI/UX

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
1. **–î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `AppDesignSystem` –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
   - –ï–¥–∏–Ω—ã–µ —Å—Ç–∏–ª–∏ —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ `AppTextStyles`
   - Smooth border radius –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∞

2. **–ê–Ω–∏–º–∞—Ü–∏–∏**
   - –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
   - –ê–Ω–∏–º–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - Fade –∏ slide –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–∞—Ä–æ–ª—è

3. **–°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏**
   - Skeleton –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞–≥—Ä—É–∑–∫–∏ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - `ErrorStateWidget` —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä–∞
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - SnackBar –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

5. **Accessibility**
   - Semantics –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è screen readers
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ labels –¥–ª—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
   - Live regions –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —É–ª—É—á—à–µ–Ω–∏—è

#### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ
1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**
   - `ProfileStateManager` —Å–æ–∑–¥–∞–Ω, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   - –í—Å—è –ª–æ–≥–∏–∫–∞ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ `_ProfilePageState`
   - –ù—É–∂–Ω–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**
   - –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ù–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

#### üü° –í–∞–∂–Ω—ã–µ
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ö—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—Ç –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏
   - –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—ç—à –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

4. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ `initState`
   - –ù–µ—Ç lazy loading –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   - –ù–µ—Ç retry –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
   - –û—à–∏–±–∫–∏ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ

#### üü¢ –£–ª—É—á—à–µ–Ω–∏—è
6. **UX**
   - –ù–µ—Ç pull-to-refresh –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
   - –ù–µ—Ç –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
   - –ù–µ—Ç offline —Ä–µ–∂–∏–º–∞

7. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è email —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
   - –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email
   - –ù–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –¥–ª–∏–Ω—É –∏–º–µ–Ω–∏

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```dart
// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
@override
void initState() {
  _loadUserProfile();
  _loadFavoritePlaces();
  _loadStatistics();
  _loadActivityHistory();
  _loadSelectedRepublic();
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ç—å.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Future.wait` —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∏–ª–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏.

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```dart
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
if (!forceRefresh && 
    _user != null && 
    _lastProfileLoad != null && 
    DateTime.now().difference(_lastProfileLoad!) < _cacheDuration) {
  return;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö—ç—à –Ω–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏

```dart
// –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ
final allActivities = <_ActivityItem>[
  ...history.places.map((p) => _PlaceActivityItem(p)),
  ...history.routes.map((r) => _RouteActivityItem(r)),
]..sort((a, b) => b.passedAt.compareTo(a.passedAt));
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ O(n log n) –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ.

**–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–ª–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üêõ –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏

### 1. **Race conditions**
```dart
// –ü—Ä–æ–±–ª–µ–º–∞: setState –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –ø–æ—Å–ª–µ dispose
if (mounted) {
  setState(() { ... });
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ (–ø—Ä–æ–≤–µ—Ä–∫–∞ `mounted`)

### 2. **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏**
```dart
// –ü—Ä–æ–±–ª–µ–º–∞: –¢–∞–π–º–µ—Ä—ã –Ω–µ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è
Timer? _oldPasswordDebounceTimer;
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ—à–µ–Ω–æ (–æ—Ç–º–µ–Ω–∞ –≤ dispose)

### 3. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤**
```dart
// –ü—Ä–æ–±–ª–µ–º–∞: RefreshIndicator –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
onRefresh: () async {
  await Future.wait([
    _loadUserProfile(forceRefresh: true),
    _loadFavoritePlaces(),
    // ...
  ]);
}
```
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

### 4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ null**
```dart
// –ü—Ä–æ–±–ª–µ–º–∞: _user –º–æ–∂–µ—Ç –±—ã—Ç—å null –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
String _getFullName() {
  if (_user == null) return '–ó–∞–≥—Ä—É–∑–∫–∞...';
  return _user!.fullName;
}
```
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:** ~1458
- **–ú–µ—Ç–æ–¥–æ–≤:** ~30
- **–í–∏–¥–∂–µ—Ç–æ–≤:** ~15
- **–°–æ—Å—Ç–æ—è–Ω–∏–π:** ~20

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ Lazy loading –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (CachedNetworkImage)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- ‚úÖ Debounce –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚ö†Ô∏è –ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- ‚ö†Ô∏è –ú–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤ –æ–¥–Ω–æ–º –≤–∏–¥–∂–µ—Ç–µ
- ‚ö†Ô∏è –ù–µ—Ç –º–µ–º–æ–∏–∑–∞—Ü–∏–∏ –≤–∏–¥–∂–µ—Ç–æ–≤
- ‚ö†Ô∏è –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
1. ‚úÖ –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ —á–µ—Ä–µ–∑ `AuthService`
2. ‚úÖ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–∞—Å—Ç–∏—á–Ω–æ —Å–∫—Ä—ã—Ç (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 4 —Ü–∏—Ñ—Ä—ã)
3. ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ä–æ–≥–æ –ø–∞—Ä–æ–ª—è –ø–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π

### –ü—Ä–æ–±–ª–µ–º—ã
1. ‚ö†Ô∏è –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏
2. ‚ö†Ô∏è –û—à–∏–±–∫–∏ –º–æ–≥—É—Ç —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–∏—Å—Ç–µ–º–µ
3. ‚ö†Ô∏è –ù–µ—Ç rate limiting –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ü—Ä–æ–±–ª–µ–º—ã
1. ‚ùå –ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤
2. ‚ùå –ù–µ—Ç widget —Ç–µ—Å—Ç–æ–≤
3. ‚ùå –°–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. ‚ùå –ù–µ—Ç –º–æ–∫–æ–≤ –¥–ª—è API

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
1. –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å dependency injection
3. –°–æ–∑–¥–∞—Ç—å –º–æ–∫–∏ –¥–ª—è API —Å–µ—Ä–≤–∏—Å–æ–≤
4. –ù–∞–ø–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ)
1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `ProfileStateManager` –∏–ª–∏ state management (Riverpod/Bloc)
   - –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑ UI

2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏**
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
   - Lazy loading –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
   - –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

3. **–£–ª—É—á—à–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**
   - –ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
   - Offline —Ä–µ–∂–∏–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ)
4. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞**
   - –í—ã–Ω–µ—Å—Ç–∏ —Å–µ–∫—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã
   - –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
   - –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞

5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
   - Retry –º–µ—Ö–∞–Ω–∏–∑–º
   - –£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

6. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
   - –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–£–ª—É—á—à–µ–Ω–∏—è)
7. **UX —É–ª—É—á—à–µ–Ω–∏—è**
   - Pull-to-refresh –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
   - Skeleton –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
   - –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

8. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –ª–æ–≥–∏–∫–∏
   - Widget —Ç–µ—Å—Ç—ã –¥–ª—è UI
   - Integration —Ç–µ—Å—Ç—ã

9. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ domain –∏ presentation
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤–∏–¥–∂–µ—Ç—ã

2. **UI/UX**
   - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω
   - –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
   - –•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
   - –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
   - –•–æ—Ä–æ—à–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
   - Accessibility –ø–æ–¥–¥–µ—Ä–∂–∫–∞

4. **–ö–æ–¥**
   - –ß–∏—Ç–∞–µ–º—ã–π –∫–æ–¥
   - –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç

---

## üéØ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|--------|-------------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 7/10 | –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å state manager |
| **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** | 9/10 | –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| **UI/UX** | 8/10 | –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, —Ö–æ—Ä–æ—à–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 6/10 | –ï—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | 7/10 | –ë–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –µ—Å—Ç—å |
| **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** | 3/10 | –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤, —Å–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å |
| **–ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ** | 7/10 | –•–æ—Ä–æ—à–∏–π –∫–æ–¥, –Ω–æ –µ—Å—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 7/10**

---

## üìå –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ProfileStateManager`
2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
4. –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

*–ê–Ω–∞–ª–∏–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω: $(date)*
*–í–µ—Ä—Å–∏—è –∫–æ–¥–∞: feature/favourites-update*

